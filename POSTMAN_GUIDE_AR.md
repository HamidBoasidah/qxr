# ุฏููู ุงุณุชุฎุฏุงู Postman Collection ููุนุฑูุถ

## ๐ฆ ุงููููุงุช ุงููุทููุจุฉ

ุชู ุฅูุดุงุก ููููู:
1. **Offers_API.postman_collection.json** - ูุฌููุนุฉ ุงูุทูุจุงุช (Collection)
2. **Offers_API.postman_environment.json** - ุจูุฆุฉ ุงูุนูู (Environment)

---

## ๐ ุฎุทูุงุช ุงูุงุณุชูุฑุงุฏ ูุงูุฅุนุฏุงุฏ

### 1. ุงุณุชูุฑุงุฏ ุงููููุงุช ุฅูู Postman

#### ุฃ. ุงุณุชูุฑุงุฏ Collection:
1. ุงูุชุญ Postman
2. ุงุถุบุท ุนูู ุฒุฑ **Import** ูู ุงูุฃุนูู
3. ุงุณุญุจ ููู `Offers_API.postman_collection.json` ุฃู ุงุถุบุท **Choose Files**
4. ุงุถุบุท **Import**

#### ุจ. ุงุณุชูุฑุงุฏ Environment:
1. ุงุถุบุท ุนูู ุฃููููุฉ **Environments** ูู ุงูุดุฑูุท ุงูุฌุงูุจู (ุฃู ุงุถุบุท ุนูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ุงูุฃุนูู)
2. ุงุถุบุท **Import**
3. ุงุณุญุจ ููู `Offers_API.postman_environment.json`
4. ุงุถุบุท **Import**

### 2. ุชูุนูู Environment
1. ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ุงูุฃุนูู (ุจุฌุงูุจ ุงูุนูู ๐๏ธ)
2. ุงุฎุชุฑ **Offers API - Local**
3. ุชุฃูุฏ ูู ุธููุฑ ุนูุงูุฉ โ ุจุฌุงูุจู

### 3. ุชุนุฏูู Base URL (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
ุฅุฐุง ูุงู ุงูุณูุฑูุฑ ูุนูู ุนูู ุนููุงู ูุฎุชูู:
1. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุนูู ๐๏ธ ูู ุงูุฃุนูู
2. ุงุถุบุท **Edit** ุจุฌุงูุจ Environment
3. ุนุฏูู ูููุฉ `base_url` (ูุซูุงู: `http://127.0.0.1:8000` ุฃู `https://yourdomain.com`)
4. ุงุญูุธ ุงูุชุบููุฑุงุช

---

## ๐ ูููู Collection

ุชุญุชูู ุงูู Collection ุนูู 4 ูุฌูุฏุงุช ุฑุฆูุณูุฉ:

### 1๏ธโฃ Authentication (ุงููุตุงุฏูุฉ)
- **Login** - ุชุณุฌูู ุงูุฏุฎูู (ูุญูุธ ุงูู token ุชููุงุฆูุงู)
- **Get Current User** - ูุนูููุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
- **Logout** - ุชุณุฌูู ุงูุฎุฑูุฌ

### 2๏ธโฃ Public Offers (ุงูุนุฑูุถ ุงูุนุงูุฉ - ุจุฏูู ูุตุงุฏูุฉ)
- **Get Public Offers List** - ูุงุฆูุฉ ุงูุนุฑูุถ ุงูุนุงูุฉ
- **Get Public Offer Details** - ุชูุงุตูู ุนุฑุถ ุนุงู

### 3๏ธโฃ Company Offers (ุนุฑูุถ ุงูุดุฑูุฉ - ุชุชุทูุจ ูุตุงุฏูุฉ)
- **Get Company Offers List** - ูุงุฆูุฉ ุนุฑูุถ ุงูุดุฑูุฉ
- **Get Company Offer Details** - ุชูุงุตูู ุนุฑุถ
- **Create Offer - Public with Discount Percent** - ุฅูุดุงุก ุนุฑุถ ุจุฎุตู ูุณุจุฉ ูุฆููุฉ
- **Create Offer - Public with Fixed Discount** - ุฅูุดุงุก ุนุฑุถ ุจุฎุตู ุซุงุจุช
- **Create Offer - Public with Bonus Quantity** - ุฅูุดุงุก ุนุฑุถ ุจูููุฉ ูุฌุงููุฉ
- **Create Offer - Private with Targets** - ุฅูุดุงุก ุนุฑุถ ุฎุงุต ุจูุณุชูุฏููู
- **Create Offer - Multiple Items** - ุฅูุดุงุก ุนุฑุถ ุจุนูุงุตุฑ ูุชุนุฏุฏุฉ
- **Update Offer - Change Status** - ุชุญุฏูุซ ุญุงูุฉ ุงูุนุฑุถ
- **Update Offer - Change Title and Description** - ุชุญุฏูุซ ุงูุนููุงู ูุงููุตู
- **Update Offer - Replace Items** - ุงุณุชุจุฏุงู ุนูุงุตุฑ ุงูุนุฑุถ
- **Update Offer - Convert to Private** - ุชุญููู ุงูุนุฑุถ ูุฎุงุต
- **Update Offer - Full Update** - ุชุญุฏูุซ ูุงูู
- **Delete Offer** - ุญุฐู ุนุฑุถ

### 4๏ธโฃ Helper Endpoints (ููุงุท ูุณุงุนุฏุฉ)
- **Get Products List** - ูุงุฆูุฉ ุงูููุชุฌุงุช
- **Get My Products** - ููุชุฌุงุช ุงูุดุฑูุฉ
- **Get Customer Categories** - ูุฆุงุช ุงูุนููุงุก
- **Get Customer Tags** - ูุณูู ุงูุนููุงุก

---

## ๐ฏ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงูููุตู ุจูุง

### ุงููุฑุญูุฉ 1: ุงุฎุชุจุงุฑ Endpoints ุงูุนุงูุฉ (ุจุฏูู ุชุณุฌูู ุฏุฎูู)

#### 1. ุงุฎุชุจุฑ ุงูุนุฑูุถ ุงูุนุงูุฉ:
```
๐ Public Offers (No Auth)
  โโ Get Public Offers List
```
- ุงุถุบุท **Send**
- ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุจุงูุนุฑูุถ ุงูุนุงูุฉ ุงููุดุทุฉ

#### 2. ุงุฎุชุจุฑ ุชูุงุตูู ุนุฑุถ ุนุงู:
```
๐ Public Offers (No Auth)
  โโ Get Public Offer Details
```
- ุนุฏูู ุงูุฑูู `1` ูู ุงูู URL ุฅูู ID ุนุฑุถ ููุฌูุฏ
- ุงุถุบุท **Send**

---

### ุงููุฑุญูุฉ 2: ุชุณุฌูู ุงูุฏุฎูู

#### 1. ุงูุชุญ ุทูุจ Login:
```
๐ Authentication
  โโ Login
```

#### 2. ุนุฏูู ุจูุงูุงุช ุงูุฏุฎูู ูู Body:
```json
{
    "email": "company@example.com",
    "password": "password"
}
```
ุงุณุชุจุฏููุง ุจุจูุงูุงุช ุดุฑูุฉ ุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### 3. ุงุถุบุท Send

#### 4. ุชุญูู ูู ุญูุธ Token:
- ุฅุฐุง ูุฌุญ ุชุณุฌูู ุงูุฏุฎููุ ุณูุชู ุญูุธ ุงูู token ุชููุงุฆูุงู
- ุงุถุบุท ุนูู ุฃููููุฉ ุงูุนูู ๐๏ธ ูู ุงูุฃุนูู
- ูุฌุจ ุฃู ุชุฑู ูููุฉ ูู `auth_token`

---

### ุงููุฑุญูุฉ 3: ุงูุญุตูู ุนูู IDs ุงููุทููุจุฉ

ูุจู ุฅูุดุงุก ุนุฑูุถุ ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ IDs ุงูููุชุฌุงุช:

#### 1. ุงุญุตู ุนูู ููุชุฌุงุช ุงูุดุฑูุฉ:
```
๐ Helper Endpoints
  โโ Get My Products
```
- ุงุถุบุท **Send**
- ุงูุณุฎ `id` ูููุชุฌ ุฃู ุฃูุซุฑ ูู ุงูุงุณุชุฌุงุจุฉ

#### 2. (ุงุฎุชูุงุฑู) ุงุญุตู ุนูู ูุฆุงุช ุงูุนููุงุก:
```
๐ Helper Endpoints
  โโ Get Customer Categories
```
- ุณุชุญุชุงุฌูุง ููุนุฑูุถ ุงูุฎุงุตุฉ

---

### ุงููุฑุญูุฉ 4: ุฅูุดุงุก ุนุฑูุถ

#### 1. ุฅูุดุงุก ุนุฑุถ ุจุณูุท ุจุฎุตู ูุณุจุฉ ูุฆููุฉ:
```
๐ Company Offers (Auth Required)
  โโ Create Offer - Public with Discount Percent
```

**ูุจู ุงูุฅุฑุณุงู:**
- ุงูุชุญ ุชุจููุจ **Body**
- ุนุฏูู `product_id` ุฅูู ID ููุชุฌ ุญูููู ูู ููุชุฌุงุชู
- ุนุฏูู ุงูุชูุงุฑูุฎ ุฅุฐุง ูุฒู ุงูุฃูุฑ

**ูุซุงู:**
```json
{
    "title": "ุนุฑุถ ุงูุตูู ุงููุจูุฑ",
    "description": "ุฎุตููุงุช ุชุตู ุฅูู 50%",
    "scope": "public",
    "status": "draft",
    "start_at": "2026-02-01",
    "end_at": "2026-03-31",
    "items": [
        {
            "product_id": 1,  // โ ุนุฏูู ูุฐุง ุงูุฑูู
            "min_qty": 5,
            "reward_type": "discount_percent",
            "discount_percent": 20.00
        }
    ],
    "targets": []
}
```

- ุงุถุบุท **Send**
- ุฅุฐุง ูุฌุญุ ุณูุชู ุญูุธ `offer_id` ุชููุงุฆูุงู ูู `last_offer_id`

#### 2. ุฌุฑูุจ ุฃููุงุน ุงูุนุฑูุถ ุงูุฃุฎุฑู:
- **Fixed Discount** - ุฎุตู ุซุงุจุช
- **Bonus Quantity** - ูููุฉ ูุฌุงููุฉ (ุชุญุชุงุฌ product_id ุขุฎุฑ ููู bonus)
- **Private Offer** - ุนุฑุถ ุฎุงุต (ุชุญุชุงุฌ category_id ุฃู tag_id)
- **Multiple Items** - ุนุฑุถ ุจุนูุงุตุฑ ูุชุนุฏุฏุฉ

---

### ุงููุฑุญูุฉ 5: ุนุฑุถ ูุชุญุฏูุซ ุงูุนุฑูุถ

#### 1. ุนุฑุถ ูุงุฆูุฉ ุนุฑูุถ ุงูุดุฑูุฉ:
```
๐ Company Offers (Auth Required)
  โโ Get Company Offers List
```
- ุงุถุบุท **Send**
- ูุฌุจ ุฃู ุชุฑู ุฌููุน ุนุฑูุถ ุงูุดุฑูุฉ

#### 2. ุนุฑุถ ุชูุงุตูู ุนุฑุถ ูุญุฏุฏ:
```
๐ Company Offers (Auth Required)
  โโ Get Company Offer Details
```
- ุงูู URL ูุณุชุฎุฏู `{{last_offer_id}}` ุชููุงุฆูุงู
- ุฃู ุนุฏููู ูุฏููุงู ุฅูู ID ุนุฑุถ ุขุฎุฑ

#### 3. ุชุญุฏูุซ ุญุงูุฉ ุงูุนุฑุถ:
```
๐ Company Offers (Auth Required)
  โโ Update Offer - Change Status
```
- ุบููุฑ `status` ูู `draft` ุฅูู `active`
- ุงุถุบุท **Send**

#### 4. ุชุญุฏูุซ ุงูุนููุงู ูุงููุตู:
```
๐ Company Offers (Auth Required)
  โโ Update Offer - Change Title and Description
```

#### 5. ุงุณุชุจุฏุงู ุนูุงุตุฑ ุงูุนุฑุถ:
```
๐ Company Offers (Auth Required)
  โโ Update Offer - Replace Items
```
- ุนุฏูู ุงูู items ูู Body
- ุงุถุบุท **Send**
- ููุงุญุธุฉ: ุณูุชู ุงุณุชุจุฏุงู ุฌููุน ุงูุนูุงุตุฑ ุงููุฏููุฉ

---

### ุงููุฑุญูุฉ 6: ุญุฐู ุนุฑุถ

```
๐ Company Offers (Auth Required)
  โโ Delete Offer
```
- ุงุถุบุท **Send**
- ุณูุชู ุญุฐู ุงูุนุฑุถ (soft delete)

---

## ๐ง ุงููุชุบูุฑุงุช ุงูุชููุงุฆูุฉ

ุงูู Collection ูุณุชุฎุฏู ูุชุบูุฑุงุช ุชูุญูุธ ุชููุงุฆูุงู:

### 1. auth_token
- ููุญูุธ ุชููุงุฆูุงู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
- ููุณุชุฎุฏู ูู ุฌููุน ุงูุทูุจุงุช ุงูุชู ุชุชุทูุจ ูุตุงุฏูุฉ
- ูุง ุชุญุชุงุฌ ููุณุฎู ูุฏููุงู

### 2. last_offer_id
- ููุญูุธ ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏ
- ููุณุชุฎุฏู ูู ุทูุจุงุช ุงูุชุญุฏูุซ ูุงูุญุฐู
- ููููู ุชุนุฏููู ูุฏููุงู ุฅุฐุง ุฃุฑุฏุช

### 3. user_id
- ููุญูุธ ุชููุงุฆูุงู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
- ููุงุณุชุฎุฏุงู ุงููุณุชูุจูู

---

## ๐จ ูุตุงุฆุญ ููุงุณุชุฎุฏุงู

### 1. ุงุณุชุฎุฏุงู Filters ูู ูุงุฆูุฉ ุงูุนุฑูุถ:
```
GET /api/offers?per_page=10&scope=public&status=active&search=ุตูู
```
- ูุนูู Query Parameters ูู ุชุจููุจ **Params**
- ุฃุฒู ุนูุงูุฉ โ ูู Parameters ุบูุฑ ุงููุทููุจุฉ

### 2. ุงุฎุชุจุงุฑ Validation Errors:
ุฌุฑูุจ ุฅุฑุณุงู ุจูุงูุงุช ุฎุงุทุฆุฉ ูุฑุคูุฉ ุฑุณุงุฆู ุงูุฎุทุฃ:
- ุนุฑุถ ุฎุงุต ุจุฏูู targets
- items ูุงุฑุบุฉ
- product_id ุบูุฑ ููุฌูุฏ
- reward_type ุจุฏูู ุงูููู ุงููุทููุจุฉ

### 3. ุงุณุชุฎุฏุงู Console:
- ุงูุชุญ **Postman Console** (ุฃุณูู ุงูุดุงุดุฉ)
- ุดุงูุฏ ุงูู logs ุงูุชููุงุฆูุฉ ุนูุฏ ุญูุธ ุงููุชุบูุฑุงุช

### 4. ุญูุธ ุงูุงุณุชุฌุงุจุงุช:
- ุงุถุบุท **Save Response** ุจุนุฏ ูู ุทูุจ ูุงุฌุญ
- ููููู ุงูุฑุฌูุน ุฅูููุง ูุงุญูุงู ูุฃูุซูุฉ

---

## โ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### 1. ุฎุทุฃ "Unauthenticated"
**ุงูุณุจุจ:** ูู ูุชู ุชุณุฌูู ุงูุฏุฎูู ุฃู ุงูุชูุช ุตูุงุญูุฉ ุงูู token

**ุงูุญู:**
- ุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู ูู ุทูุจ **Login**
- ุชุฃูุฏ ูู ุชูุนูู Environment ุงูุตุญูุญ

### 2. ุฎุทุฃ "ุงูุนุฑุถ ุงููุทููุจ ุบูุฑ ููุฌูุฏ"
**ุงูุณุจุจ:** ุงูุนุฑุถ ุบูุฑ ููุฌูุฏ ุฃู ูุง ุชููู ุตูุงุญูุฉ ุงููุตูู ุฅููู

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู ุงูุนุฑุถ ููุฌูุฏ
- ุชุฃูุฏ ูู ุฃูู ูุณุฌู ุฏุฎูู ุจุญุณุงุจ ุงูุดุฑูุฉ ุงููุงููุฉ ููุนุฑุถ

### 3. ุฎุทุฃ "ุงูููุชุฌ ุบูุฑ ููุฌูุฏ"
**ุงูุณุจุจ:** product_id ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ ุฃู ูุง ููุชูู ูุดุฑูุชู

**ุงูุญู:**
- ุงุณุชุฎุฏู ุทูุจ **Get My Products** ููุญุตูู ุนูู IDs ุตุญูุญุฉ
- ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ููุชุฌุงุช ุชูุชูู ูุดุฑูุชู

### 4. ุฎุทุฃ "ูุฌุจ ุชุญุฏูุฏ ูุณุชูุฏู ูุงุญุฏ ุนูู ุงูุฃูู"
**ุงูุณุจุจ:** ุงูุนุฑุถ ุฎุงุต (private) ุจุฏูู targets

**ุงูุญู:**
- ุฃุถู targets ูู Body
- ุฃู ุบููุฑ scope ุฅูู "public"

### 5. Base URL ุฎุงุทุฆ
**ุงูุณุจุจ:** ุงูุณูุฑูุฑ ูุนูู ุนูู ุนููุงู ูุฎุชูู

**ุงูุญู:**
- ุนุฏูู `base_url` ูู Environment
- ุชุฃูุฏ ูู ุชุดุบูู ุงูุณูุฑูุฑ: `php artisan serve`

---

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฌุงุจุงุช

### ุงุณุชุฌุงุจุฉ ูุงุฌุญุฉ (201 Created):
```json
{
    "success": true,
    "message": "ุชู ุฅูุดุงุก ุงูุนุฑุถ ุจูุฌุงุญ",
    "data": {
        "id": 1,
        "title": "ุนุฑุถ ุงูุตูู ุงููุจูุฑ",
        "scope": "public",
        "status": "draft",
        ...
    }
}
```

### ุงุณุชุฌุงุจุฉ ุฎุทุฃ Validation (422):
```json
{
    "success": false,
    "message": "ุฎุทุฃ ูู ุงูุจูุงูุงุช ุงููุฏุฎูุฉ",
    "errors": {
        "title": ["ุนููุงู ุงูุนุฑุถ ูุทููุจ."],
        "items": ["ูุฌุจ ุฅุถุงูุฉ ุนูุตุฑ ูุงุญุฏ ุนูู ุงูุฃูู ููุนุฑุถ."]
    }
}
```

### ุงุณุชุฌุงุจุฉ ุฎุทุฃ Not Found (404):
```json
{
    "success": false,
    "message": "ุงูุนุฑุถ ุงููุทููุจ ุบูุฑ ููุฌูุฏ"
}
```

---

## ๐ ุณููุงุฑูู ุงุฎุชุจุงุฑ ูุงูู

### ุงูุณููุงุฑูู: ุฅูุดุงุก ุนุฑุถ ุตููู ูุชูุนููู

1. **ุชุณุฌูู ุงูุฏุฎูู**
   ```
   POST /api/login
   ```

2. **ุงูุญุตูู ุนูู ููุชุฌุงุช ุงูุดุฑูุฉ**
   ```
   GET /api/products/mine
   ```
   - ุงูุณุฎ ID ููุชุฌ

3. **ุฅูุดุงุก ุนุฑุถ ุจุญุงูุฉ draft**
   ```
   POST /api/offers
   Body: scope=public, status=draft, product_id={ูู ุงูุฎุทูุฉ 2}
   ```

4. **ุนุฑุถ ุชูุงุตูู ุงูุนุฑุถ ููุชุฃูุฏ**
   ```
   GET /api/offers/{id}
   ```

5. **ุชูุนูู ุงูุนุฑุถ**
   ```
   PUT /api/offers/{id}
   Body: {"status": "active"}
   ```

6. **ุงูุชุญูู ูู ุธููุฑู ูู ุงููุงุฆูุฉ ุงูุนุงูุฉ**
   ```
   GET /api/offers/public
   ```

7. **ุชุญุฏูุซ ุชูุงุฑูุฎ ุงูุนุฑุถ**
   ```
   PUT /api/offers/{id}
   Body: {"start_at": "2026-03-01", "end_at": "2026-04-30"}
   ```

8. **ุญุฐู ุงูุนุฑุถ**
   ```
   DELETE /api/offers/{id}
   ```

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

1. **Soft Delete:** ุงูุนุฑูุถ ุงููุญุฐููุฉ ูุง ุชูุญุฐู ููุงุฆูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

2. **Date Format:** 
   - ุงูุฅุฏุฎุงู: `YYYY-MM-DD`
   - ุงูุฅุฎุฑุงุฌ: `YYYY-MM-DD HH:MM:SS`

3. **Pagination:** ุฌููุน ุงูููุงุฆู ุชุฏุนู `per_page` parameter

4. **Authorization:** ูุชู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุนุจุฑ Policy ุชููุงุฆูุงู

5. **Auto-save:** ุงูู token ู offer_id ููุญูุธุงู ุชููุงุฆูุงู

---

## ๐ ูููุฒูุฏ ูู ุงููุนูููุงุช

ุฑุงุฌุน ุงููููุงุช ุงูุชุงููุฉ:
- `API_OFFERS_DOCUMENTATION.md` - ุชูุซูู ูุงูู ุจุงูุฅูุฌููุฒูุฉ
- `API_OFFERS_SUMMARY_AR.md` - ููุฎุต ุจุงูุนุฑุจูุฉ

---

**ุงุณุชูุชุน ุจุงูุงุฎุชุจุงุฑ! ๐**
